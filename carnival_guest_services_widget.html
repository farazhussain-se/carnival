<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0" />
<title>Carnival Guest Services ‚Äì Associate Widget</title>
<script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
<script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
<script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap');

  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

  body {
    font-family: 'Inter', sans-serif;
    background: #0a1628;
    display: flex;
    justify-content: center;
    align-items: flex-start;
    min-height: 100vh;
    padding: 20px;
  }

  .phone-frame {
    width: 390px;
    min-height: 844px;
    background: #0f1f3d;
    border-radius: 44px;
    overflow: hidden;
    box-shadow:
      0 0 0 2px #2a3f6b,
      0 0 0 8px #0a1628,
      0 30px 80px rgba(0,0,0,0.6);
    position: relative;
    display: flex;
    flex-direction: column;
  }

  /* STATUS BAR */
  .status-bar {
    background: #0a1930;
    padding: 12px 24px 8px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-size: 12px;
    font-weight: 600;
    color: #ffffff;
    flex-shrink: 0;
  }
  .status-bar .time { font-size: 15px; font-weight: 700; }
  .status-icons { display: flex; gap: 6px; align-items: center; }
  .status-icons svg { width: 16px; height: 16px; fill: white; }

  /* HEADER */
  .app-header {
    background: linear-gradient(135deg, #c41e3a 0%, #e8213e 50%, #b01830 100%);
    padding: 16px 20px 14px;
    flex-shrink: 0;
    position: relative;
    overflow: hidden;
  }
  .app-header::before {
    content: '';
    position: absolute;
    top: -20px; right: -20px;
    width: 120px; height: 120px;
    border-radius: 50%;
    background: rgba(255,255,255,0.07);
  }
  .app-header::after {
    content: '';
    position: absolute;
    bottom: -30px; left: 30px;
    width: 80px; height: 80px;
    border-radius: 50%;
    background: rgba(255,255,255,0.05);
  }
  .header-top {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 4px;
  }
  .header-logo {
    display: flex;
    align-items: center;
    gap: 8px;
  }
  .logo-icon {
    width: 32px; height: 32px;
    background: white;
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 18px;
  }
  .logo-text {
    color: white;
    font-size: 13px;
    font-weight: 700;
    letter-spacing: 0.5px;
    line-height: 1.2;
  }
  .logo-text span {
    display: block;
    font-size: 10px;
    font-weight: 400;
    opacity: 0.85;
    letter-spacing: 1px;
    text-transform: uppercase;
  }
  .header-avatar {
    width: 36px; height: 36px;
    background: rgba(255,255,255,0.2);
    border-radius: 50%;
    border: 2px solid rgba(255,255,255,0.5);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 16px;
    color: white;
    font-weight: 700;
    cursor: pointer;
  }
  .header-subtitle {
    color: rgba(255,255,255,0.85);
    font-size: 11px;
    font-weight: 500;
    letter-spacing: 0.3px;
  }
  .header-ship {
    color: white;
    font-size: 18px;
    font-weight: 800;
    letter-spacing: -0.3px;
  }

  /* CONTENT AREA */
  .content-area {
    flex: 1;
    overflow-y: auto;
    background: #f0f4f8;
    scrollbar-width: none;
  }
  .content-area::-webkit-scrollbar { display: none; }

  /* SCREEN VIEWS */
  .screen { display: none; flex-direction: column; }
  .screen.active { display: flex; }

  /* ‚îÄ‚îÄ HOME SCREEN ‚îÄ‚îÄ */
  .home-greeting {
    background: linear-gradient(160deg, #1a3260 0%, #0f1f3d 100%);
    padding: 20px 20px 24px;
    color: white;
  }
  .greeting-label { font-size: 12px; opacity: 0.7; text-transform: uppercase; letter-spacing: 1px; margin-bottom: 4px; }
  .greeting-name { font-size: 22px; font-weight: 800; margin-bottom: 2px; }
  .greeting-ship { font-size: 13px; opacity: 0.8; display: flex; align-items: center; gap: 5px; }
  .status-badge {
    display: inline-flex;
    align-items: center;
    gap: 5px;
    background: rgba(46, 213, 115, 0.2);
    border: 1px solid rgba(46, 213, 115, 0.4);
    color: #2ed573;
    font-size: 10px;
    font-weight: 600;
    padding: 3px 8px;
    border-radius: 20px;
    margin-top: 10px;
    letter-spacing: 0.5px;
  }
  .pulse {
    width: 6px; height: 6px;
    background: #2ed573;
    border-radius: 50%;
    animation: pulse 2s infinite;
  }
  @keyframes pulse {
    0%, 100% { opacity: 1; transform: scale(1); }
    50% { opacity: 0.5; transform: scale(0.8); }
  }

  .alert-banner {
    margin: 16px 16px 0;
    background: #fff8e1;
    border-left: 4px solid #f59e0b;
    border-radius: 10px;
    padding: 12px 14px;
    display: flex;
    align-items: flex-start;
    gap: 10px;
    font-size: 12px;
    color: #7c5c00;
    box-shadow: 0 2px 8px rgba(0,0,0,0.06);
  }
  .alert-banner .alert-icon { font-size: 16px; flex-shrink: 0; margin-top: 1px; }
  .alert-banner strong { display: block; font-size: 12px; font-weight: 700; color: #b45309; margin-bottom: 2px; }

  .quick-actions { padding: 16px 16px 0; }
  .section-label {
    font-size: 11px;
    font-weight: 700;
    color: #8a9ab5;
    text-transform: uppercase;
    letter-spacing: 1px;
    margin-bottom: 10px;
  }
  .action-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 10px;
  }
  .action-card {
    background: white;
    border-radius: 16px;
    padding: 16px 14px;
    cursor: pointer;
    transition: transform 0.15s, box-shadow 0.15s;
    box-shadow: 0 2px 12px rgba(0,0,0,0.06);
    border: 1.5px solid transparent;
    position: relative;
    overflow: hidden;
  }
  .action-card:active { transform: scale(0.97); }
  .action-card.highlight { border-color: #c41e3a; background: linear-gradient(135deg, #fff5f7, white); }
  .action-card.highlight::after {
    content: 'TAP';
    position: absolute;
    top: 8px; right: 8px;
    background: #c41e3a;
    color: white;
    font-size: 8px;
    font-weight: 800;
    padding: 2px 6px;
    border-radius: 10px;
    letter-spacing: 0.5px;
  }
  .card-icon { font-size: 26px; margin-bottom: 8px; }
  .card-title { font-size: 13px; font-weight: 700; color: #1a2744; margin-bottom: 2px; }
  .card-sub { font-size: 11px; color: #8a9ab5; font-weight: 400; }

  .recent-section { padding: 16px; }
  .recent-item {
    background: white;
    border-radius: 12px;
    padding: 12px 14px;
    display: flex;
    align-items: center;
    gap: 12px;
    margin-bottom: 8px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.05);
  }
  .recent-dot { width: 8px; height: 8px; border-radius: 50%; flex-shrink: 0; }
  .recent-text { flex: 1; font-size: 12px; color: #4a5568; }
  .recent-time { font-size: 11px; color: #a0aec0; }

  /* ‚îÄ‚îÄ DIRECTORY SCREEN ‚îÄ‚îÄ */
  .dir-search-bar {
    background: white;
    margin: 16px;
    border-radius: 14px;
    padding: 12px 16px;
    display: flex;
    align-items: center;
    gap: 10px;
    box-shadow: 0 2px 12px rgba(0,0,0,0.08);
    border: 1.5px solid #e2e8f0;
  }
  .search-icon { font-size: 16px; }
  .search-input {
    flex: 1;
    border: none;
    outline: none;
    font-size: 14px;
    color: #1a2744;
    font-family: 'Inter', sans-serif;
    background: transparent;
  }
  .search-input::placeholder { color: #a0aec0; }

  .dir-tabs {
    display: flex;
    gap: 8px;
    padding: 0 16px 12px;
    overflow-x: auto;
    scrollbar-width: none;
  }
  .dir-tab {
    padding: 7px 14px;
    border-radius: 20px;
    font-size: 12px;
    font-weight: 600;
    white-space: nowrap;
    cursor: pointer;
    border: 1.5px solid #e2e8f0;
    background: white;
    color: #8a9ab5;
    transition: all 0.15s;
  }
  .dir-tab.active {
    background: #c41e3a;
    color: white;
    border-color: #c41e3a;
  }

  .dir-card {
    background: white;
    border-radius: 16px;
    margin: 0 16px 12px;
    overflow: hidden;
    box-shadow: 0 2px 12px rgba(0,0,0,0.06);
    cursor: pointer;
    transition: transform 0.15s;
    border: 1.5px solid transparent;
  }
  .dir-card:active { transform: scale(0.98); }
  .dir-card.selected { border-color: #c41e3a; }
  .dir-card-header {
    padding: 14px 16px 12px;
    display: flex;
    align-items: center;
    gap: 12px;
  }
  .dir-card-icon {
    width: 44px; height: 44px;
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 22px;
    flex-shrink: 0;
  }
  .dir-card-title { font-size: 14px; font-weight: 700; color: #1a2744; }
  .dir-card-sub { font-size: 11px; color: #8a9ab5; margin-top: 2px; }
  .dir-card-badge {
    margin-left: auto;
    background: #e8f5e9;
    color: #2e7d32;
    font-size: 10px;
    font-weight: 700;
    padding: 4px 8px;
    border-radius: 8px;
    white-space: nowrap;
  }
  .dir-card-badge.upcoming { background: #fef3c7; color: #b45309; }
  .dir-card-divider { height: 1px; background: #f0f4f8; margin: 0 16px; }
  .dir-card-preview {
    padding: 10px 16px 14px;
    font-size: 12px;
    color: #4a5568;
    line-height: 1.7;
  }
  .preview-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 5px 0;
    border-bottom: 1px solid #f7f7f7;
  }
  .preview-row:last-child { border-bottom: none; }
  .preview-venue { font-weight: 600; color: #1a2744; }
  .preview-time { color: #c41e3a; font-weight: 600; font-size: 11px; }
  .preview-deck { color: #a0aec0; font-size: 10px; }

  /* ‚îÄ‚îÄ DETAIL SCREEN ‚îÄ‚îÄ */
  .detail-hero {
    background: linear-gradient(160deg, #1a3260 0%, #0f1f3d 100%);
    padding: 20px 20px 24px;
    color: white;
  }
  .detail-back {
    display: flex;
    align-items: center;
    gap: 6px;
    color: rgba(255,255,255,0.7);
    font-size: 13px;
    cursor: pointer;
    margin-bottom: 16px;
    font-weight: 500;
  }
  .detail-category {
    font-size: 10px;
    text-transform: uppercase;
    letter-spacing: 1.5px;
    color: rgba(255,255,255,0.6);
    margin-bottom: 6px;
  }
  .detail-title { font-size: 24px; font-weight: 800; margin-bottom: 6px; }
  .detail-meta {
    display: flex;
    align-items: center;
    gap: 12px;
    font-size: 12px;
    color: rgba(255,255,255,0.75);
  }
  .detail-meta .dot { opacity: 0.4; }

  .hub-sync-bar {
    background: #e8f5e9;
    padding: 10px 20px;
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 11px;
    color: #2e7d32;
    font-weight: 600;
    border-bottom: 1px solid #c8e6c9;
  }

  .detail-section { padding: 16px 16px 0; }
  .detail-section-title {
    font-size: 13px;
    font-weight: 700;
    color: #1a2744;
    margin-bottom: 10px;
    display: flex;
    align-items: center;
    gap: 6px;
  }

  .time-block {
    background: white;
    border-radius: 12px;
    overflow: hidden;
    box-shadow: 0 2px 8px rgba(0,0,0,0.05);
    margin-bottom: 4px;
  }
  .time-row {
    display: flex;
    align-items: center;
    padding: 11px 14px;
    border-bottom: 1px solid #f7f7f7;
    gap: 10px;
  }
  .time-row:last-child { border-bottom: none; }
  .time-indicator {
    width: 4px;
    height: 32px;
    border-radius: 2px;
    flex-shrink: 0;
  }
  .time-venue { flex: 1; }
  .time-venue-name { font-size: 13px; font-weight: 600; color: #1a2744; }
  .time-venue-deck { font-size: 11px; color: #a0aec0; }
  .time-slot { text-align: right; }
  .time-open { font-size: 12px; font-weight: 700; color: #1a2744; }
  .time-dress { font-size: 10px; color: #8a9ab5; margin-top: 1px; }
  .time-now-badge {
    background: #c41e3a;
    color: white;
    font-size: 9px;
    font-weight: 800;
    padding: 2px 6px;
    border-radius: 6px;
    letter-spacing: 0.5px;
  }

  .show-card {
    background: white;
    border-radius: 14px;
    padding: 14px;
    display: flex;
    gap: 12px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.05);
    margin-bottom: 8px;
    cursor: pointer;
    transition: transform 0.15s;
  }
  .show-card:active { transform: scale(0.98); }
  .show-thumb {
    width: 64px;
    height: 64px;
    border-radius: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 28px;
    flex-shrink: 0;
  }
  .show-info { flex: 1; }
  .show-title { font-size: 13px; font-weight: 700; color: #1a2744; margin-bottom: 3px; }
  .show-venue { font-size: 11px; color: #8a9ab5; margin-bottom: 6px; }
  .show-tags { display: flex; gap: 5px; flex-wrap: wrap; }
  .show-tag {
    font-size: 10px;
    font-weight: 600;
    padding: 2px 7px;
    border-radius: 6px;
  }
  .tag-time { background: #fef3c7; color: #b45309; }
  .tag-venue { background: #e0f2fe; color: #0369a1; }
  .tag-type { background: #f3e8ff; color: #7e22ce; }
  .tag-seats { background: #e8f5e9; color: #2e7d32; }
  .tag-full { background: #fee2e2; color: #dc2626; }

  .share-section {
    padding: 16px;
    margin-bottom: 16px;
  }
  .share-card {
    background: linear-gradient(135deg, #1a3260 0%, #c41e3a 100%);
    border-radius: 20px;
    padding: 20px;
    color: white;
    text-align: center;
    position: relative;
    overflow: hidden;
  }
  .share-card::before {
    content: '';
    position: absolute;
    top: -30px; right: -30px;
    width: 100px; height: 100px;
    border-radius: 50%;
    background: rgba(255,255,255,0.07);
  }
  .share-title { font-size: 16px; font-weight: 800; margin-bottom: 4px; }
  .share-sub { font-size: 11px; opacity: 0.8; margin-bottom: 16px; }

  .qr-container {
    background: white;
    border-radius: 16px;
    padding: 12px;
    display: inline-block;
    margin-bottom: 14px;
  }

  .share-link-box {
    background: rgba(255,255,255,0.15);
    border: 1px solid rgba(255,255,255,0.25);
    border-radius: 10px;
    padding: 9px 14px;
    font-size: 12px;
    font-weight: 600;
    letter-spacing: 0.3px;
    margin-bottom: 14px;
    display: flex;
    align-items: center;
    justify-content: space-between;
  }
  .copy-btn {
    background: rgba(255,255,255,0.25);
    border: none;
    border-radius: 6px;
    color: white;
    font-size: 10px;
    font-weight: 700;
    padding: 3px 8px;
    cursor: pointer;
    font-family: 'Inter', sans-serif;
    letter-spacing: 0.5px;
  }
  .share-buttons {
    display: flex;
    gap: 8px;
  }
  .share-btn {
    flex: 1;
    padding: 12px;
    border-radius: 12px;
    border: none;
    font-size: 12px;
    font-weight: 700;
    cursor: pointer;
    font-family: 'Inter', sans-serif;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 6px;
    transition: transform 0.15s, opacity 0.15s;
  }
  .share-btn:active { transform: scale(0.97); opacity: 0.9; }
  .btn-qr { background: white; color: #c41e3a; }
  .btn-link { background: rgba(255,255,255,0.2); color: white; border: 1px solid rgba(255,255,255,0.3); }
  .btn-sms { background: rgba(255,255,255,0.2); color: white; border: 1px solid rgba(255,255,255,0.3); }

  .success-toast {
    position: fixed;
    bottom: 100px;
    left: 50%;
    transform: translateX(-50%) translateY(20px);
    background: #1a2744;
    color: white;
    padding: 10px 20px;
    border-radius: 20px;
    font-size: 13px;
    font-weight: 600;
    opacity: 0;
    transition: all 0.3s;
    pointer-events: none;
    white-space: nowrap;
    z-index: 999;
    display: flex;
    align-items: center;
    gap: 6px;
  }
  .success-toast.show {
    opacity: 1;
    transform: translateX(-50%) translateY(0);
  }

  /* ‚îÄ‚îÄ BOTTOM NAV ‚îÄ‚îÄ */
  .bottom-nav {
    background: white;
    border-top: 1px solid #e2e8f0;
    display: flex;
    padding: 10px 0 20px;
    flex-shrink: 0;
  }
  .nav-item {
    flex: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 4px;
    cursor: pointer;
    padding: 4px;
    transition: opacity 0.15s;
  }
  .nav-item:active { opacity: 0.7; }
  .nav-icon { font-size: 22px; line-height: 1; }
  .nav-label { font-size: 10px; font-weight: 600; color: #a0aec0; }
  .nav-item.active .nav-icon { filter: none; }
  .nav-item.active .nav-label { color: #c41e3a; }
  .nav-indicator {
    width: 4px; height: 4px;
    border-radius: 50%;
    background: #c41e3a;
    margin-top: 2px;
    opacity: 0;
  }
  .nav-item.active .nav-indicator { opacity: 1; }

  /* STEP FLOW OVERLAY */
  .step-overlay {
    position: absolute;
    top: 0; left: 0; right: 0; bottom: 0;
    background: rgba(10, 22, 40, 0.65);
    z-index: 100;
    display: flex;
    align-items: flex-end;
    pointer-events: none;
    opacity: 0;
    transition: opacity 0.3s;
  }
  .step-overlay.visible { opacity: 1; pointer-events: all; }
  .step-bubble {
    background: white;
    border-radius: 20px 20px 0 0;
    padding: 20px 20px 32px;
    width: 100%;
    transform: translateY(100%);
    transition: transform 0.35s cubic-bezier(0.34, 1.56, 0.64, 1);
  }
  .step-overlay.visible .step-bubble { transform: translateY(0); }
  .step-bubble-handle {
    width: 36px; height: 4px;
    background: #e2e8f0;
    border-radius: 2px;
    margin: 0 auto 16px;
  }
  .step-number {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 24px; height: 24px;
    background: #c41e3a;
    color: white;
    border-radius: 50%;
    font-size: 12px;
    font-weight: 800;
    margin-right: 8px;
    flex-shrink: 0;
  }
  .step-title {
    font-size: 16px;
    font-weight: 800;
    color: #1a2744;
    margin-bottom: 8px;
    display: flex;
    align-items: center;
  }
  .step-desc { font-size: 13px; color: #4a5568; line-height: 1.6; margin-bottom: 16px; }
  .step-cta {
    width: 100%;
    padding: 14px;
    border-radius: 14px;
    background: #c41e3a;
    color: white;
    font-size: 14px;
    font-weight: 700;
    border: none;
    cursor: pointer;
    font-family: 'Inter', sans-serif;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    transition: transform 0.15s;
  }
  .step-cta:active { transform: scale(0.98); }
  .step-skip {
    width: 100%;
    padding: 10px;
    background: transparent;
    border: none;
    color: #a0aec0;
    font-size: 12px;
    cursor: pointer;
    font-family: 'Inter', sans-serif;
    margin-top: 6px;
  }

  .hub-badge {
    display: inline-flex;
    align-items: center;
    gap: 4px;
    background: #e8f5e9;
    color: #2e7d32;
    font-size: 10px;
    font-weight: 700;
    padding: 3px 8px;
    border-radius: 8px;
    letter-spacing: 0.3px;
  }
</style>
</head>
<body>
<div id="root"></div>

<script type="text/babel">
const { useState, useEffect, useRef } = React;

/* ‚îÄ‚îÄ‚îÄ DATA ‚îÄ‚îÄ‚îÄ */
const DINING = [
  { name: "Lido Buffet",          deck: "Deck 9 Lido",      open: "6:30 AM ‚Äì 10:00 PM", color: "#e57373", now: true,  dress: "Casual" },
  { name: "Main Dining Room",     deck: "Deck 3 Aft",       open: "6:00 PM ‚Äì 9:30 PM",  color: "#7986cb", now: false, dress: "Smart Casual", note: "Elegant Night" },
  { name: "Guy's Burger Joint",   deck: "Deck 9 Midship",   open: "11:30 AM ‚Äì 6:00 PM", color: "#ff7043", now: false, dress: "Casual" },
  { name: "BlueIguana Cantina",   deck: "Deck 9 Fwd",       open: "8:00 AM ‚Äì 9:30 PM",  color: "#26a69a", now: true,  dress: "Casual" },
  { name: "Pizza Pirate",         deck: "Deck 10 Fwd",      open: "11:00 AM ‚Äì 2:00 AM", color: "#ef6c00", now: true,  dress: "Casual" },
  { name: "Fahrenheit 555 Steak", deck: "Deck 3 Aft",       open: "6:00 PM ‚Äì 10:00 PM", color: "#ad1457", now: false, dress: "Smart Casual", spec: true },
];

const SHOWS = [
  { title: "Celestial Strings",     venue: "Liquid Lounge",     deck: "Deck 4",  time: "7:00 PM",  type: "Live Music",    emoji: "üéª", seats: "Available",  desc: "Elegant orchestral performance" },
  { title: "Punchliner Comedy Club",venue: "Main Stage",        deck: "Deck 7",  time: "7:30 PM",  type: "Comedy",        emoji: "üé≠", seats: "Available",  desc: "Adults-only stand-up showcase" },
  { title: "Mega Deck Party",        venue: "Lido Deck Stage",   deck: "Deck 9",  time: "8:00 PM",  type: "Deck Party",    emoji: "üéâ", seats: "Open Air",   desc: "Dancing under the stars" },
  { title: "Flick at the Lido",     venue: "Seaside Theatre",   deck: "Deck 11", time: "9:00 PM",  type: "Movie",         emoji: "üé¨", seats: "Open Air",   desc: "Tonight's feature under the stars" },
  { title: "Elegant Night Gala",    venue: "Atrium Stage",      deck: "Deck 3",  time: "9:30 PM",  type: "Live Show",     emoji: "‚ú®", seats: "Limited",    desc: "Signature Carnival production" },
  { title: "Late Night DJ",         venue: "Club O2",            deck: "Deck 4",  time: "10:30 PM", type: "Club",          emoji: "üéß", seats: "Available",  desc: "Dance the night away" },
];

/* ‚îÄ‚îÄ‚îÄ QR SVG (static path simulation) ‚îÄ‚îÄ‚îÄ */
const QRCode = () => (
  <svg width="120" height="120" viewBox="0 0 120 120" xmlns="http://www.w3.org/2000/svg">
    <rect width="120" height="120" fill="white"/>
    {/* TL finder */}
    <rect x="8" y="8" width="34" height="34" fill="none" stroke="#1a2744" strokeWidth="3"/>
    <rect x="16" y="16" width="18" height="18" fill="#1a2744"/>
    {/* TR finder */}
    <rect x="78" y="8" width="34" height="34" fill="none" stroke="#1a2744" strokeWidth="3"/>
    <rect x="86" y="16" width="18" height="18" fill="#1a2744"/>
    {/* BL finder */}
    <rect x="8" y="78" width="34" height="34" fill="none" stroke="#1a2744" strokeWidth="3"/>
    <rect x="16" y="86" width="18" height="18" fill="#1a2744"/>
    {/* Data modules */}
    {[
      [48,8],[52,8],[56,8],[62,8],[68,8],[72,8],
      [48,12],[56,12],[66,12],
      [50,16],[54,16],[60,16],[64,16],[70,16],[74,16],
      [48,20],[58,20],[62,20],[68,20],[72,20],
      [50,24],[54,24],[56,24],[64,24],[70,24],
      [48,28],[52,28],[60,28],[66,28],[72,28],[74,28],
      [50,32],[56,32],[60,32],[64,32],[70,32],
      [8,48],[12,48],[18,48],[24,48],[30,48],[36,48],
      [44,48],[50,48],[56,48],[62,48],[68,48],[74,48],[78,48],[84,48],[90,48],[96,48],[104,48],[108,48],
      [8,52],[16,52],[22,52],[28,52],[34,52],[40,52],[48,52],[54,52],[60,52],[66,52],[72,52],[80,52],[88,52],[96,52],[104,52],[110,52],
      [10,56],[14,56],[20,56],[26,56],[32,56],[42,56],[52,56],[58,56],[64,56],[70,56],[78,56],[86,56],[94,56],[102,56],[108,56],
      [8,60],[16,60],[24,60],[30,60],[36,60],[44,60],[50,60],[56,60],[64,60],[72,60],[80,60],[88,60],[96,60],[104,60],[110,60],
      [10,64],[18,64],[22,64],[28,64],[34,64],[40,64],[48,64],[54,64],[60,64],[66,64],[76,64],[84,64],[92,64],[100,64],[108,64],
      [48,68],[52,68],[58,68],[66,68],[72,68],[80,68],[90,68],[96,68],[104,68],[110,68],
      [50,72],[56,72],[62,72],[68,72],[78,72],[86,72],[92,72],[100,72],[106,72],
      [48,78],[54,78],[60,78],[78,78],[84,78],[90,78],[96,78],[104,78],[108,78],
      [50,82],[58,82],[64,82],[70,82],[80,82],[88,82],[94,82],[102,82],[110,82],
      [48,86],[52,86],[60,86],[66,86],[76,86],[84,86],[92,86],[100,86],[108,86],
      [50,90],[54,90],[62,90],[68,90],[78,90],[86,90],[94,90],[102,90],
      [48,94],[56,94],[64,94],[72,94],[80,94],[88,94],[96,94],[104,94],[110,94],
      [50,98],[52,98],[58,98],[66,98],[74,98],[82,98],[90,98],[100,98],[108,98],
      [48,104],[54,104],[60,104],[68,104],[76,104],[84,104],[92,104],[102,104],
      [50,108],[56,108],[62,108],[70,108],[78,108],[86,108],[94,108],[104,108],[110,108],
    ].map(([x,y],i) => <rect key={i} x={x} y={y} width="4" height="4" fill="#1a2744"/>)}
  </svg>
);

/* ‚îÄ‚îÄ‚îÄ SCREENS ‚îÄ‚îÄ‚îÄ */
function HomeScreen({ onNavigate }) {
  return (
    <div className="screen active" style={{flexDirection:'column'}}>
      <div className="home-greeting">
        <div className="greeting-label">Good Evening</div>
        <div className="greeting-name">Sarah üëã</div>
        <div className="greeting-ship">üö¢ Carnival Horizon ¬∑ Day 3 of 7 ¬∑ Nassau Bound</div>
        <div className="status-badge"><div className="pulse"></div>On Duty ‚Äì Guest Services Desk</div>
      </div>

      <div className="alert-banner">
        <span className="alert-icon">üí¨</span>
        <div>
          <strong>Guest Inquiry</strong>
          Guest at Desk 2 is asking about dinner times and tonight's shows.
        </div>
      </div>

      <div className="quick-actions" style={{paddingTop:16}}>
        <div className="section-label">Quick Access</div>
        <div className="action-grid">
          <div className="action-card highlight" onClick={() => onNavigate('directory')}>
            <div className="card-icon">üìñ</div>
            <div className="card-title">Directory / Knowledge</div>
            <div className="card-sub">Dining ¬∑ Shows ¬∑ FAQs</div>
          </div>
          <div className="action-card" onClick={() => onNavigate('share')}>
            <div className="card-icon">üîó</div>
            <div className="card-title">Share with Guest</div>
            <div className="card-sub">QR code ¬∑ Short link</div>
          </div>
          <div className="action-card">
            <div className="card-icon">üéüÔ∏è</div>
            <div className="card-title">Reservations</div>
            <div className="card-sub">Dining ¬∑ Shows</div>
          </div>
          <div className="action-card">
            <div className="card-icon">üõéÔ∏è</div>
            <div className="card-title">Service Requests</div>
            <div className="card-sub">Cabins ¬∑ Amenities</div>
          </div>
        </div>
      </div>

      <div className="recent-section">
        <div className="section-label">Recent Lookups</div>
        <div className="recent-item">
          <div className="recent-dot" style={{background:'#7986cb'}}></div>
          <div className="recent-text">Shore Excursions ‚Äì Nassau</div>
          <div className="recent-time">11:24 AM</div>
        </div>
        <div className="recent-item">
          <div className="recent-dot" style={{background:'#26a69a'}}></div>
          <div className="recent-text">Spa Hours ‚Äì Serenity Spa</div>
          <div className="recent-time">10:08 AM</div>
        </div>
        <div className="recent-item">
          <div className="recent-dot" style={{background:'#ef6c00'}}></div>
          <div className="recent-text">Dining ‚Äì Elegant Night Menu</div>
          <div className="recent-time">9:45 AM</div>
        </div>
      </div>
    </div>
  );
}

function DirectoryScreen({ onNavigate, onSelectCard }) {
  const [tab, setTab] = useState('all');
  const tabs = ['all','dining','shows','faq'];
  const tabLabels = { all: 'All', dining: 'üçΩ Dining', shows: 'üé≠ Shows', faq: '‚ùì FAQ' };

  return (
    <div className="screen active" style={{flexDirection:'column', paddingTop:12}}>
      <div style={{padding:'0 16px 4px', display:'flex', alignItems:'center', justifyContent:'space-between'}}>
        <div style={{fontSize:20, fontWeight:800, color:'#1a2744'}}>Directory</div>
        <div className="hub-badge">‚ö° HUB Synced</div>
      </div>

      <div className="dir-search-bar">
        <span className="search-icon">üîç</span>
        <input className="search-input" placeholder="Search dining, shows, info‚Ä¶" readOnly />
      </div>

      <div className="dir-tabs">
        {tabs.map(t => (
          <div key={t} className={`dir-tab ${tab===t?'active':''}`} onClick={() => setTab(t)}>
            {tabLabels[t]}
          </div>
        ))}
      </div>

      {(tab==='all'||tab==='dining') && (
        <div className="dir-card selected" onClick={() => onNavigate('dining')}>
          <div className="dir-card-header">
            <div className="dir-card-icon" style={{background:'#fff3e0'}}>üçΩÔ∏è</div>
            <div>
              <div className="dir-card-title">Tonight's Dining Hours</div>
              <div className="dir-card-sub">All venues ¬∑ Updated live from HUB app</div>
            </div>
            <div className="dir-card-badge">6 Open</div>
          </div>
          <div className="dir-card-divider"></div>
          <div className="dir-card-preview">
            {DINING.slice(0,3).map((d,i) => (
              <div className="preview-row" key={i}>
                <span className="preview-venue">{d.name}</span>
                <span className="preview-deck">{d.deck}</span>
                <span className="preview-time">{d.now ? 'üü¢ Open' : d.open.split('‚Äì')[1].trim()}</span>
              </div>
            ))}
            <div style={{fontSize:11, color:'#c41e3a', fontWeight:600, textAlign:'right', marginTop:4}}>
              +3 more venues ‚Üí
            </div>
          </div>
        </div>
      )}

      {(tab==='all'||tab==='shows') && (
        <div className="dir-card" onClick={() => onNavigate('shows')}>
          <div className="dir-card-header">
            <div className="dir-card-icon" style={{background:'#f3e5f5'}}>üé≠</div>
            <div>
              <div className="dir-card-title">What's Happening Tonight</div>
              <div className="dir-card-sub">Entertainment schedule ¬∑ 7 PM ‚Äì Late</div>
            </div>
            <div className="dir-card-badge upcoming">6 Shows</div>
          </div>
          <div className="dir-card-divider"></div>
          <div className="dir-card-preview">
            {SHOWS.slice(0,3).map((s,i) => (
              <div className="preview-row" key={i}>
                <span style={{fontSize:16}}>{s.emoji}</span>
                <span className="preview-venue" style={{flex:1, paddingLeft:8}}>{s.title}</span>
                <span className="preview-time">{s.time}</span>
              </div>
            ))}
            <div style={{fontSize:11, color:'#c41e3a', fontWeight:600, textAlign:'right', marginTop:4}}>
              +3 more shows ‚Üí
            </div>
          </div>
        </div>
      )}

      {(tab==='all'||tab==='faq') && (
        <div className="dir-card" style={{marginBottom:20}}>
          <div className="dir-card-header">
            <div className="dir-card-icon" style={{background:'#e3f2fd'}}>‚ùì</div>
            <div>
              <div className="dir-card-title">Guest FAQs</div>
              <div className="dir-card-sub">Policies, gratuities, port times & more</div>
            </div>
            <div className="dir-card-badge">142 articles</div>
          </div>
        </div>
      )}
    </div>
  );
}

function DiningDetailScreen({ onNavigate }) {
  return (
    <div className="screen active" style={{flexDirection:'column'}}>
      <div className="detail-hero">
        <div className="detail-back" onClick={() => onNavigate('directory')}>
          ‚Üê Directory
        </div>
        <div className="detail-category">üçΩ Dining Hours</div>
        <div className="detail-title">Tonight's Venues</div>
        <div className="detail-meta">
          <span>Day 3 of 7</span>
          <span className="dot">¬∑</span>
          <span>Carnival Horizon</span>
          <span className="dot">¬∑</span>
          <span>Elegant Night ü•Ç</span>
        </div>
      </div>
      <div className="hub-sync-bar">
        <span>‚úÖ</span> Live data synced with Carnival HUB app
      </div>

      <div className="detail-section">
        <div className="detail-section-title">üü¢ Open Now</div>
        <div className="time-block">
          {DINING.filter(d => d.now).map((d,i) => (
            <div className="time-row" key={i}>
              <div className="time-indicator" style={{background: d.color}}></div>
              <div className="time-venue">
                <div className="time-venue-name">{d.name}</div>
                <div className="time-venue-deck">{d.deck}</div>
              </div>
              <div className="time-slot">
                <div className="time-open">{d.open}</div>
                <div className="time-dress">{d.dress}</div>
              </div>
              <div className="time-now-badge">NOW</div>
            </div>
          ))}
        </div>
      </div>

      <div className="detail-section" style={{marginTop:14}}>
        <div className="detail-section-title">üïê Opening Later</div>
        <div className="time-block">
          {DINING.filter(d => !d.now).map((d,i) => (
            <div className="time-row" key={i}>
              <div className="time-indicator" style={{background: d.color}}></div>
              <div className="time-venue">
                <div className="time-venue-name">{d.name}{d.spec ? ' ‚≠ê' : ''}</div>
                <div className="time-venue-deck">{d.deck}{d.note ? ` ¬∑ ${d.note}` : ''}</div>
              </div>
              <div className="time-slot">
                <div className="time-open">{d.open}</div>
                <div className="time-dress">{d.dress}</div>
              </div>
            </div>
          ))}
        </div>
      </div>

      <div style={{padding:'16px 16px 20px'}}>
        <button className="step-cta" style={{background:'linear-gradient(135deg,#1a3260,#c41e3a)'}} onClick={() => onNavigate('shows')}>
          üé≠ View Tonight's Entertainment ‚Üí
        </button>
      </div>
    </div>
  );
}

function ShowsDetailScreen({ onNavigate }) {
  return (
    <div className="screen active" style={{flexDirection:'column'}}>
      <div className="detail-hero">
        <div className="detail-back" onClick={() => onNavigate('directory')}>
          ‚Üê Directory
        </div>
        <div className="detail-category">üé≠ Entertainment</div>
        <div className="detail-title">What's Happening Tonight</div>
        <div className="detail-meta">
          <span>7:00 PM ‚Äì Late</span>
          <span className="dot">¬∑</span>
          <span>Multiple Venues</span>
        </div>
      </div>
      <div className="hub-sync-bar">
        <span>‚úÖ</span> Live data synced with Carnival HUB app
      </div>

      <div className="detail-section" style={{paddingBottom:4}}>
        <div className="detail-section-title">üåü Tonight's Lineup</div>
        {SHOWS.map((s,i) => (
          <div className="show-card" key={i}>
            <div className="show-thumb" style={{background: `hsl(${i*55+200},70%,92%)`}}>
              {s.emoji}
            </div>
            <div className="show-info">
              <div className="show-title">{s.title}</div>
              <div className="show-venue">{s.venue} ¬∑ {s.deck}</div>
              <div className="show-tags">
                <span className="show-tag tag-time">{s.time}</span>
                <span className="show-tag tag-type">{s.type}</span>
                <span className={`show-tag ${s.seats==='Limited'?'tag-full':'tag-seats'}`}>
                  {s.seats==='Available'?'‚úì Seats Avail':s.seats==='Limited'?'‚ö° Limited':s.seats}
                </span>
              </div>
            </div>
          </div>
        ))}
      </div>

      <div style={{padding:'8px 16px 20px'}}>
        <button className="step-cta" style={{background:'linear-gradient(135deg,#1a3260,#c41e3a)'}} onClick={() => onNavigate('share')}>
          üîó Share This With Guest ‚Üí
        </button>
      </div>
    </div>
  );
}

function ShareScreen({ onNavigate, onToast }) {
  const [copied, setCopied] = useState(false);
  const link = "hub.carnival.com/tonight/horizon";

  const handleCopy = () => {
    setCopied(true);
    onToast('üìã Link copied to clipboard!');
    setTimeout(() => setCopied(false), 2000);
  };

  return (
    <div className="screen active" style={{flexDirection:'column'}}>
      <div className="detail-hero">
        <div className="detail-back" onClick={() => onNavigate('shows')}>
          ‚Üê Tonight's Shows
        </div>
        <div className="detail-category">üîó Share With Guest</div>
        <div className="detail-title">What's Happening Tonight</div>
        <div className="detail-meta">
          <span>Carnival Horizon</span>
          <span className="dot">¬∑</span>
          <span>Day 3 ¬∑ Elegant Night</span>
        </div>
      </div>
      <div className="hub-sync-bar">
        <span>‚úÖ</span> Guests see the same live HUB data on their device
      </div>

      <div className="share-section">
        <div className="share-card">
          <div className="share-title">üì± Show or Send to Guest</div>
          <div className="share-sub">Guest scans this QR or taps the link to view dining & entertainment</div>

          <div className="qr-container">
            <QRCode />
          </div>

          <div className="share-link-box">
            <span>üîó {link}</span>
            <button className="copy-btn" onClick={handleCopy}>{copied ? '‚úì COPIED':'COPY'}</button>
          </div>

          <div className="share-buttons">
            <button className="share-btn btn-qr" onClick={() => onToast('üì± QR code displayed full-screen!')}>
              <span>üì±</span> Show QR
            </button>
            <button className="share-btn btn-link" onClick={handleCopy}>
              <span>üîó</span> Copy Link
            </button>
            <button className="share-btn btn-sms" onClick={() => onToast('üí¨ SMS sent to guest!')}>
              <span>üí¨</span> Text SMS
            </button>
          </div>
        </div>

        <div style={{marginTop:14, background:'white', borderRadius:14, padding:'14px 16px', boxShadow:'0 2px 8px rgba(0,0,0,0.06)'}}>
          <div style={{fontSize:12, fontWeight:700, color:'#1a2744', marginBottom:8}}>
            üìã What the Guest Will See
          </div>
          {[
            { icon:'üçΩÔ∏è', label:"Tonight's dining hours for all venues" },
            { icon:'üé≠', label:"Full entertainment schedule (7 PM ‚Äì Late)" },
            { icon:'üìç', label:'Deck locations & venue details' },
            { icon:'‚è±Ô∏è', label:'Real-time open/close status' },
          ].map((item,i) => (
            <div key={i} style={{display:'flex', alignItems:'center', gap:8, padding:'5px 0', borderBottom: i<3?'1px solid #f7f7f7':'none', fontSize:12, color:'#4a5568'}}>
              <span style={{fontSize:16}}>{item.icon}</span>
              <span>{item.label}</span>
            </div>
          ))}
        </div>

        <div style={{marginTop:12, background:'#e8f5e9', borderRadius:12, padding:'12px 14px', fontSize:12, color:'#2e7d32', fontWeight:500, display:'flex', gap:8, alignItems:'flex-start'}}>
          <span style={{fontSize:16}}>‚úÖ</span>
          <span>No app download required for the guest. The link opens in any mobile browser and uses live HUB app data.</span>
        </div>
      </div>
    </div>
  );
}

/* ‚îÄ‚îÄ‚îÄ STEP FLOW OVERLAY ‚îÄ‚îÄ‚îÄ */
const STEPS = [
  {
    num: 1,
    title: "Guest asks about dinner & shows",
    desc: "A guest at the desk wants to know what's open for dinner and what entertainment is happening tonight. Sarah opens the associate widget.",
    cta: "Open Directory / Knowledge ‚Üí",
    nav: 'directory',
  },
  {
    num: 2,
    title: "Sarah pulls up Dining & Entertainment",
    desc: "She taps Directory / Knowledge and selects Tonight's Dining Hours ‚Äî the same live data that powers the guest-facing HUB app.",
    cta: "View Dining Hours ‚Üí",
    nav: 'dining',
  },
  {
    num: 3,
    title: "Then checks tonight's show lineup",
    desc: "After reviewing dining, Sarah taps through to What's Happening Tonight ‚Äî all shows, times, venues, and availability in one view.",
    cta: "See Tonight's Shows ‚Üí",
    nav: 'shows',
  },
  {
    num: 4,
    title: "Share directly with the guest",
    desc: "Sarah taps Share, then either shows the QR code for the guest to scan or sends a short link so they can browse on their own device ‚Äî no app download required.",
    cta: "Go to Share Screen ‚Üí",
    nav: 'share',
  },
];

/* ‚îÄ‚îÄ‚îÄ MAIN APP ‚îÄ‚îÄ‚îÄ */
function App() {
  const [screen, setScreen] = useState('home');
  const [stepIndex, setStepIndex] = useState(0);
  const [showStep, setShowStep] = useState(true);
  const [toast, setToast] = useState('');
  const [toastVisible, setToastVisible] = useState(false);
  const toastTimer = useRef(null);

  const navItems = [
    { id:'home', icon:'üè†', label:'Home' },
    { id:'directory', icon:'üìñ', label:'Directory' },
    { id:'share', icon:'üîó', label:'Share' },
    { id:'profile', icon:'üë§', label:'Sarah' },
  ];

  const handleNavigate = (s) => {
    setScreen(s);
    // advance step when navigating to expected screen
    const stepNav = STEPS[stepIndex]?.nav;
    if (s === stepNav) {
      setTimeout(() => {
        if (stepIndex < STEPS.length - 1) {
          setStepIndex(i => i + 1);
          setShowStep(true);
        } else {
          setShowStep(false);
        }
      }, 300);
    }
  };

  const handleStepCTA = () => {
    const nav = STEPS[stepIndex].nav;
    setShowStep(false);
    handleNavigate(nav);
  };

  const handleSkip = () => setShowStep(false);

  const showToast = (msg) => {
    if (toastTimer.current) clearTimeout(toastTimer.current);
    setToast(msg);
    setToastVisible(true);
    toastTimer.current = setTimeout(() => setToastVisible(false), 2200);
  };

  return (
    <div className="phone-frame">
      {/* STATUS BAR */}
      <div className="status-bar">
        <span className="time">8:42</span>
        <div className="status-icons">
          <svg viewBox="0 0 24 24"><path d="M1 1l22 22M16.72 11.06A10.94 10.94 0 0 1 19 12.55M5 12.55a10.94 10.94 0 0 1 5.17-2.39M10.71 5.05A16 16 0 0 1 22.56 9M1.42 9a15.91 15.91 0 0 1 4.7-2.88M8.53 16.11a6 6 0 0 1 6.95 0M12 20h.01"/></svg>
          <span style={{fontSize:12}}>‚ñÇ‚ñÑ‚ñÜ‚ñà</span>
          <span style={{fontSize:12}}>üîã</span>
        </div>
      </div>

      {/* APP HEADER */}
      <div className="app-header">
        <div className="header-top">
          <div className="header-logo">
            <div className="logo-icon">‚öì</div>
            <div className="logo-text">
              Carnival
              <span>Guest Services</span>
            </div>
          </div>
          <div className="header-avatar">S</div>
        </div>
        <div className="header-subtitle">Carnival Horizon ¬∑ Crew Associate View</div>
      </div>

      {/* CONTENT */}
      <div className="content-area" style={{position:'relative'}}>
        {screen === 'home' && <HomeScreen onNavigate={handleNavigate} />}
        {screen === 'directory' && <DirectoryScreen onNavigate={handleNavigate} />}
        {screen === 'dining' && <DiningDetailScreen onNavigate={handleNavigate} />}
        {screen === 'shows' && <ShowsDetailScreen onNavigate={handleNavigate} />}
        {screen === 'share' && <ShareScreen onNavigate={handleNavigate} onToast={showToast} />}
      </div>

      {/* BOTTOM NAV */}
      <div className="bottom-nav">
        {navItems.map(n => (
          <div key={n.id} className={`nav-item ${screen===n.id||((screen==='dining'||screen==='shows')&&n.id==='directory')?'active':''}`}
            onClick={() => { setScreen(n.id); }}>
            <span className="nav-icon">{n.icon}</span>
            <span className="nav-label">{n.label}</span>
            <div className="nav-indicator"></div>
          </div>
        ))}
      </div>

      {/* STEP FLOW OVERLAY */}
      <div className={`step-overlay ${showStep && stepIndex < STEPS.length ? 'visible' : ''}`}>
        {stepIndex < STEPS.length && (
          <div className="step-bubble">
            <div className="step-bubble-handle"></div>
            <div style={{display:'flex', alignItems:'center', gap:10, marginBottom:6}}>
              {STEPS.map((_,i) => (
                <div key={i} style={{
                  height: 4, flex: 1, borderRadius: 2,
                  background: i <= stepIndex ? '#c41e3a' : '#e2e8f0',
                  transition: 'background 0.3s'
                }}></div>
              ))}
            </div>
            <div style={{fontSize:10, color:'#a0aec0', marginBottom:14, fontWeight:600, letterSpacing:'0.5px', textTransform:'uppercase'}}>
              Step {stepIndex+1} of {STEPS.length}
            </div>
            <div className="step-title">
              <div className="step-number">{STEPS[stepIndex].num}</div>
              {STEPS[stepIndex].title}
            </div>
            <div className="step-desc">{STEPS[stepIndex].desc}</div>
            <button className="step-cta" onClick={handleStepCTA}>
              {STEPS[stepIndex].cta}
            </button>
            <button className="step-skip" onClick={handleSkip}>Explore on my own</button>
          </div>
        )}
      </div>

      {/* TOAST */}
      <div className={`success-toast ${toastVisible ? 'show' : ''}`}>
        {toast}
      </div>
    </div>
  );
}

ReactDOM.createRoot(document.getElementById('root')).render(<App />);
</script>
</body>
</html>
